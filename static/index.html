<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>自动发布系统</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <div class="topbar">
            <div class="brand">🚀  Publisher</div>
        </div>

        <div class="layout">

            <main class="main">
                <section class="chat">
                    <div class="chat-box" id="chat-box"></div>
                    <div class="composer">
                        <textarea id="chat-input" rows="3" placeholder="输入消息，回车发送（Shift+Enter换行）"></textarea>
                        <div class="row">
                            <button id="send-msg" class="btn-primary">
                                <span class="btn-text">发送</span>
                                <span class="loading">生成中...</span>
                            </button>
                            <button id="clear-chat" class="btn-secondary">清空</button>
                        </div>
                    </div>
                </section>

                <section class="publish">
                    <div class="row">
                        <input type="text" id="title" placeholder="文章标题" class="grow">
                        <button id="publish-btn" class="btn-success" disabled>
                            <span class="btn-text">发布</span>
                            <span class="loading">发布中...</span>
                        </button>
                        <button id="schedule-publish-btn" class="btn-warning" disabled>
                            <span class="btn-text">定时发布</span>
                            <span class="loading">添加中...</span>
                        </button>
                    </div>
                    <div class="row">
                        <select id="topic-group-filter" class="small" style="width: 150px;">
                            <option value="">所有分组</option>
                        </select>
                        <select id="topic-select" class="grow">
                            <option value="">选择话题（可选）</option>
                        </select>
                        <button id="refresh-topics" class="btn-secondary small">刷新</button>
                    </div>
                    <div class="row">
                        <input type="url" id="topic-url" placeholder="或输入话题链接" class="grow">
                        <button id="get-topic-info" class="btn-secondary small">获取信息</button>
                    </div>
                    
                    <!-- 关键词选择区域 -->
                    <div id="keyword-selection" class="row" style="display: none;">
                        <label class="small-label">选择关键词（必选）:</label>
                        <select id="keyword-select" class="grow">
                            <option value="">请选择关键词</option>
                        </select>
                        <button id="manage-keywords" class="btn-secondary small">管理</button>
                    </div>
                    
                    <!-- 发布方式选择区域 -->
                    <div class="row">
                        <label class="small-label">发布方式:</label>
                        <select id="publish-type-select" class="small" style="width: 120px;">
                            <option value="anonymous">匿名发布</option>
                            <option value="real_name">实名发布</option>
                        </select>
                    </div>

                    <!-- 账号选择区域 -->
                    <div class="row">
                        <label class="small-label">使用账号:</label>
                        <select id="publish-account-select" class="grow">
                            <option value="">使用默认账号</option>
                        </select>
                    </div>

                    <textarea id="generated-content" rows="8" placeholder="生成的内容会显示在这里，可编辑后发布"></textarea>
                    
                    <!-- 多篇内容显示区域 -->
                    <div id="multiple-posts-container" class="multiple-posts-container" style="display: none;">
                        <div class="multiple-posts-header">
                            <h4>检测到多篇内容</h4>
                            <div class="posts-count">共 <span id="posts-count">0</span> 篇</div>
                        </div>
                        <div id="multiple-posts-list" class="multiple-posts-list">
                            <!-- 多篇内容列表将动态生成 -->
                        </div>
                    </div>
                    
                    <div class="row">
                        <button id="clear-btn" class="btn-secondary">清空内容</button>
                    </div>
                </section>
            </main>

            <aside class="rightbar">
                <div class="section">
                    <div class="section-title">AI配置管理</div>
                    <div class="ai-config-status">
                        <p>当前使用：<span id="current-ai-name">加载中...</span></p>
                        <select id="ai-config-select" class="small">
                            <option value="">加载配置中...</option>
                        </select>
                    </div>
                    <div class="row">
                        <button id="test-ai-config" class="btn-primary small">测试连接</button>
                        <button id="manage-ai-configs" class="btn-secondary small">配置管理</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">提示词管理</div>
                    <div class="prompt-quick-selector">
                        <div class="current-prompt-info">
                            <p class="small-text">当前: <span id="sidebar-current-prompt">加载中...</span></p>
                        </div>
                        <div class="row">
                            <select id="sidebar-prompt-select" class="grow">
                                <option value="">选择提示词</option>
                            </select>
                        </div>
                        <div class="row">
                            <button id="quick-apply-prompt" class="btn-success small" disabled>应用</button>
                            <button id="manage-prompts" class="btn-secondary small">管理</button>
                        </div>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">话题管理</div>
                    <div class="row">
                        <button id="manage-topics" class="btn-secondary grow">管理话题</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">自动发布管理</div>
                    <div class="row">
                        <button id="manage-auto-publish" class="btn-info grow">管理自动发布</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">
                        定时发布
                        <span id="pending-count" class="pending-count">0</span>
                    </div>
                    <div class="row">
                        <button id="manage-scheduled" class="btn-warning grow">管理定时发布</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">草稿箱</div>
                    <div class="row">
                        <button id="parse-json-btn" class="btn-info grow">JSON解析</button>
                    </div>
                    <div class="row">
                        <button id="manage-drafts" class="btn-success grow">管理草稿</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">脉脉账号</div>
                    <div class="row">
                        <button id="manage-accounts" class="btn-info grow">账号管理</button>
                    </div>
                </div>
                <div class="section">
                    <div class="section-title">状态</div>
                    <div id="status-display" class="status-display"><p>等待操作...</p></div>
                </div>
            </aside>
        </div>
    </div>

    <!-- AI配置管理弹窗 -->
    <div id="ai-config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>AI配置管理</h3>
                <button class="modal-close" id="close-ai-config-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="ai-config-section">
                    <div class="current-config-info">
                        <p>当前使用配置：<span id="modal-current-ai-name" class="config-name">未知</span></p>
                    </div>
                    
                    <!-- 新增配置区域 -->
                    <div class="ai-config-form-section">
                        <h4>添加新配置</h4>
                        <div class="ai-config-form">
                            <div class="row">
                                <input type="text" id="new-ai-name" placeholder="配置名称" class="grow">
                                <input type="text" id="new-ai-description" placeholder="描述（可选）" class="grow">
                            </div>
                            <div class="row">
                                <input type="url" id="new-ai-base-url" placeholder="API地址 (如 https://api.openai.com/v1)" class="grow">
                            </div>
                            <div class="row">
                                <input type="text" id="new-ai-api-key" placeholder="API密钥" class="grow">
                            </div>
                            <div class="row">
                                <input type="text" id="new-ai-main-model" placeholder="主模型名称" class="grow">
                                <input type="text" id="new-ai-assistant-model" placeholder="助手模型（可选）" class="grow">
                            </div>
                            <div class="row">
                                <button id="add-ai-config-btn" class="btn-success small">添加配置</button>
                                <button id="clear-ai-form-btn" class="btn-secondary small">清空表单</button>
                            </div>
                        </div>
                    </div>
                    
                    <div id="ai-configs-container" class="ai-configs-container">
                        <!-- AI配置列表将动态生成 -->
                    </div>
                    
                    <div class="ai-config-actions">
                        <button id="refresh-ai-configs" class="btn-primary">刷新配置</button>
                        <button id="test-all-configs" class="btn-secondary">测试所有</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-ai-config-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 话题管理弹窗 -->
    <div id="topic-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>话题管理</h3>
                <button class="modal-close" id="close-topic-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="topic-left-panel">
                    <!-- 分组管理区域 -->
                    <div class="topic-group-section">
                        <h4>分组管理</h4>
                        <div class="row">
                            <input type="text" id="new-group-name" placeholder="新分组名称" class="grow">
                            <button id="add-group-btn" class="btn-primary small">添加分组</button>
                        </div>
                    </div>

                    <!-- 新增话题区域 -->
                    <div class="topic-add-section">
                        <h4>新增话题</h4>
                        <div class="row">
                            <input type="text" id="new-topic-id" placeholder="话题ID" style="width: 120px;">
                            <input type="text" id="new-topic-name" placeholder="话题名称" class="grow">
                        </div>
                        <div class="row">
                            <input type="text" id="new-topic-circle" placeholder="圈子类型" class="grow">
                            <select id="new-topic-group-select" class="grow">
                                <option value="">选择分组 (可选)</option>
                            </select>
                        </div>
                        <div class="row">
                            <select id="new-topic-publish-type" class="grow">
                                <option value="anonymous">匿名发布</option>
                                <option value="real_name">实名发布</option>
                            </select>
                            <button id="add-topic-btn" class="btn-primary small">添加话题</button>
                        </div>
                    </div>

                    <!-- 批量导入区域 -->
                    <div class="topic-batch-section">
                        <h4>批量导入</h4>
                        <textarea id="batch-json-input" rows="8" placeholder="粘贴JSON数据，格式：[{&quot;id&quot;: &quot;...&quot;, &quot;name&quot;: &quot;...&quot;, &quot;circle_type&quot;: &quot;...&quot;, &quot;group&quot;: &quot;分组名(可选)&quot;}, ...]"></textarea>
                        <div class="row">
                            <select id="batch-import-group-select" class="grow">
                               <option value="">导入到... (默认：未分组)</option>
                            </select>
                            <button id="batch-import-btn" class="btn-success small">开始导入</button>
                        </div>
                    </div>
                </div>

                <div class="topic-right-panel">
                    <!-- 话题列表区域 -->
                    <div class="topic-list-section">
                        <h4>话题列表</h4>
                        <div class="topic-search-bar">
                            <input type="text" id="topic-search" placeholder="搜索话题..." class="grow">
                            <button id="search-topics-btn" class="btn-secondary small">搜索</button>
                        </div>
                        <div id="topic-list-container" class="topic-list-container">
                            <!-- 分组和话题列表将动态生成在这里 -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-topic-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 定时发布管理弹窗 -->
    <div id="scheduled-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>定时发布管理</h3>
                <button class="modal-close" id="close-scheduled-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="scheduled-stats">
                    <p>当前待发布任务：<span id="scheduled-pending-count">0</span> 个</p>
                </div>
                <div id="scheduled-list-container" class="scheduled-list-container">
                    <!-- 定时发布任务列表将动态生成在这里 -->
                </div>
            </div>
            <div class="modal-footer">
                <button id="refresh-scheduled" class="btn-primary">刷新列表</button>
                <button id="close-scheduled-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 提示词管理弹窗 -->
    <div id="prompt-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>提示词管理</h3>
                <button class="modal-close" id="close-prompt-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 选择和应用区域 -->
                <div class="prompt-selector-section">
                    <h4>选择提示词</h4>
                    <div class="row">
                        <select id="prompt-select" class="grow">
                            <option value="">选择提示词模板</option>
                        </select>
                        <button id="apply-prompt" class="btn-success small">应用</button>
                    </div>
                    <p class="current-prompt-info">当前使用: <span id="current-prompt-name">无</span></p>
                </div>

                <!-- 管理区域 -->
                <div class="prompt-management-section">
                    <h4>管理模板</h4>

                    <!-- 简单导航栏 -->
                    <div class="prompt-simple-nav">
                        <div class="prompt-counter">
                            <span id="current-prompt-index">1</span> / <span id="total-prompts-count">0</span>
                        </div>
                        <div class="prompt-quick-select">
                            <label class="small-label">快速选择:</label>
                            <select id="prompt-quick-select" class="grow">
                                <option value="">选择提示词跳转</option>
                            </select>
                        </div>
                        <div class="prompt-nav-buttons">
                            <button id="prev-prompt" class="btn-secondary small">← 上一个</button>
                            <button id="next-prompt" class="btn-secondary small">下一个 →</button>
                        </div>
                        <div class="prompt-actions">
                            <button id="add-prompt-item" class="btn-primary small">新增</button>
                            <button id="delete-current-prompt" class="btn-danger small">删除</button>
                        </div>
                    </div>

                    <!-- 单个提示词编辑器 -->
                    <div class="prompt-single-editor">
                        <div class="prompt-name-input">
                            <input type="text" id="current-prompt-name-input" placeholder="提示词名称" class="grow">
                        </div>
                        <div class="prompt-content-input">
                            <textarea id="current-prompt-content-input" rows="12" placeholder="输入提示词内容..."></textarea>
                        </div>
                    </div>

                    <!-- 保存按钮 -->
                    <div class="prompt-save-section">
                        <button id="save-current-prompt" class="btn-success">保存当前修改</button>
                        <button id="save-all-prompts" class="btn-success">保存全部</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-prompt-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 关键词管理弹窗 -->
    <div id="keyword-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>分组关键词管理</h3>
                <button class="modal-close" id="close-keyword-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="keyword-left-panel">
                    <!-- 分组选择区域 -->
                    <div class="keyword-group-section">
                        <h4>选择分组</h4>
                        <select id="keyword-group-select" class="grow">
                            <option value="">选择要管理的分组</option>
                        </select>
                        <div class="group-info" id="group-keyword-info">
                            <p>当前分组：<span id="current-group-name">未选择</span></p>
                            <p>关键词数量：<span id="current-group-count">0</span></p>
                        </div>
                    </div>

                    <!-- 添加关键词区域 -->
                    <div class="keyword-add-section">
                        <h4>添加关键词</h4>
                        <div class="row">
                            <input type="text" id="new-keyword-input" placeholder="输入新关键词（如 #阿里巴巴）" class="grow">
                            <button id="add-keyword-btn" class="btn-primary small" disabled>添加</button>
                        </div>
                    </div>

                    <!-- 批量导入区域 -->
                    <div class="keyword-batch-section">
                        <h4>批量设置</h4>
                        <textarea id="batch-keywords-input" rows="4" placeholder="每行一个关键词，例如：&#10;#阿里巴巴&#10;#字节跳动&#10;#小米"></textarea>
                        <div class="row">
                            <button id="batch-set-keywords-btn" class="btn-success small" disabled>批量设置</button>
                            <button id="clear-all-keywords-btn" class="btn-danger small" disabled>清空全部</button>
                        </div>
                    </div>
                </div>

                <div class="keyword-right-panel">
                    <!-- 关键词列表区域 -->
                    <div class="keyword-list-section">
                        <h4>当前关键词</h4>
                        <div id="keywords-list-container" class="keywords-list-container">
                            <p class="no-group-selected">请先选择一个分组</p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-keyword-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 自动发布管理弹窗 -->
    <div id="auto-publish-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>自动发布管理</h3>
                <button class="modal-close" id="close-auto-publish-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 配置创建区域 -->
                <div class="auto-publish-create-section">
                    <h4>新建自动发布配置</h4>
                    <div class="auto-publish-form">
                        <div class="form-row">
                            <label>选择话题:</label>
                            <select id="auto-publish-topic-select" class="grow">
                                <option value="">请选择话题（可选，留空则无话题发布）</option>
                            </select>
                        </div>
                        <div class="form-row">
                            <label>选择提示词:</label>
                            <select id="auto-publish-prompt-select" class="grow">
                                <option value="">使用当前选定的提示词</option>
                            </select>
                            <span class="help-text">选择此话题使用的提示词，留空则使用全局当前提示词</span>
                        </div>
                        <div class="form-row">
                            <label>发布方式:</label>
                            <select id="auto-publish-publish-type" class="grow">
                                <option value="anonymous">匿名发布</option>
                                <option value="real_name">实名发布</option>
                            </select>
                            <span class="help-text">选择此自动发布配置的发布方式</span>
                        </div>
                        <div class="form-row">
                            <label>最大发布数量:</label>
                            <input type="number" id="auto-publish-max-posts" value="-1" min="-1" placeholder="-1表示无限发布">
                            <span class="help-text">-1表示无限发布，其他数字表示最大发布次数</span>
                        </div>
                        <div class="form-row">
                            <label>最小发布间隔(分钟):</label>
                            <input type="number" id="auto-publish-min-interval" value="30" min="1" max="1440" placeholder="最小间隔">
                            <span class="help-text">两次发布之间的最小间隔时间</span>
                        </div>
                        <div class="form-row">
                            <label>最大发布间隔(分钟):</label>
                            <input type="number" id="auto-publish-max-interval" value="60" min="1" max="1440" placeholder="最大间隔">
                            <span class="help-text">两次发布之间的最大间隔时间</span>
                        </div>
                        <div class="form-row">
                            <button id="create-auto-publish-btn" class="btn-success">创建配置</button>
                        </div>
                    </div>
                </div>

                <!-- 配置列表区域 -->
                <div class="auto-publish-list-section">
                    <h4>现有配置</h4>
                    <div class="auto-publish-stats">
                        <p>配置总数：<span id="auto-publish-total-count">0</span> 个 | 
                           激活中：<span id="auto-publish-active-count">0</span> 个</p>
                    </div>
                    <div id="auto-publish-list-container" class="auto-publish-list-container">
                        <!-- 自动发布配置列表将在这里显示 -->
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="refresh-auto-publish" class="btn-primary">刷新列表</button>
                <button id="close-auto-publish-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- JSON解析弹窗 -->
    <div id="parse-json-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>JSON解析到草稿箱</h3>
                <button class="modal-close" id="close-parse-json-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="parse-json-section">
                    <h4>粘贴JSON内容</h4>
                    <textarea id="json-content-input" rows="10" placeholder='粘贴AI生成的JSON内容，格式：[{"title":"标题1","content":"内容1"},{"title":"标题2","content":"内容2"}]'></textarea>

                    <h4>话题设置（可选）</h4>
                    <div class="row">
                        <select id="parse-json-topic-group" class="small" style="width: 150px;">
                            <option value="">所有分组</option>
                        </select>
                        <select id="parse-json-topic-select" class="grow">
                            <option value="">选择话题（可选）</option>
                        </select>
                    </div>

                    <div class="row">
                        <label class="small-label">发布方式:</label>
                        <select id="parse-json-publish-type" class="small" style="width: 120px;">
                            <option value="anonymous">匿名发布</option>
                            <option value="real_name">实名发布</option>
                        </select>
                    </div>

                    <div class="parse-json-preview" id="parse-json-preview" style="display: none;">
                        <h4>解析预览</h4>
                        <div class="preview-stats">
                            <p>成功解析: <span id="parse-success-count">0</span> 篇</p>
                        </div>
                        <div id="parsed-items-preview" class="parsed-items-preview">
                            <!-- 解析后的内容预览将在这里显示 -->
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="parse-json-btn-action" class="btn-primary">解析JSON</button>
                <button id="save-parsed-drafts-btn" class="btn-success" style="display: none;">保存到草稿箱</button>
                <button id="close-parse-json-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 草稿箱管理弹窗 -->
    <div id="drafts-modal" class="modal">
        <div class="modal-content large-modal">
            <div class="modal-header">
                <h3>草稿箱管理</h3>
                <button class="modal-close" id="close-drafts-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 操作工具栏 -->
                <div class="drafts-toolbar">
                    <div class="row">
                        <input type="text" id="draft-search-input" placeholder="搜索草稿（标题或内容）..." class="grow">
                        <button id="draft-search-btn" class="btn-secondary small">搜索</button>
                        <button id="draft-refresh-btn" class="btn-primary small">刷新</button>
                    </div>

                    <div class="row">
                        <select id="draft-source-filter" class="small" style="width: 120px;">
                            <option value="">所有来源</option>
                            <option value="manual">手动创建</option>
                            <option value="parsed">JSON解析</option>
                        </select>

                        <select id="draft-topic-filter" class="grow">
                            <option value="">所有话题</option>
                        </select>

                        <label class="checkbox-label">
                            <input type="checkbox" id="draft-select-all">
                            <span>全选</span>
                        </label>
                    </div>

                    <div class="row">
                        <button id="draft-batch-publish-immediate" class="btn-success small" disabled>立即发布选中</button>
                        <button id="draft-batch-publish-scheduled" class="btn-warning small" disabled>定时发布选中</button>
                        <button id="draft-batch-delete" class="btn-danger small" disabled>删除选中</button>
                    </div>
                </div>

                <!-- 草稿统计信息 -->
                <div class="drafts-stats">
                    <p>草稿总数: <span id="drafts-total-count">0</span> | 已选中: <span id="drafts-selected-count">0</span></p>
                </div>

                <!-- 草稿列表 -->
                <div id="drafts-list-container" class="drafts-list-container">
                    <!-- 草稿列表将在这里动态生成 -->
                    <p class="no-drafts-message">暂无草稿</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="close-drafts-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <!-- 批量发布配置弹窗 -->
    <div id="batch-publish-config-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>批量定时发布配置</h3>
                <button class="modal-close" id="close-batch-publish-config-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="batch-publish-config-section">
                    <h4>时间间隔设置</h4>
                    <div class="form-row">
                        <label>最小间隔(分钟):</label>
                        <input type="number" id="batch-min-interval" value="60" min="10" max="1440" placeholder="最小间隔">
                        <span class="help-text">两篇之间的最小时间间隔</span>
                    </div>
                    <div class="form-row">
                        <label>最大间隔(分钟):</label>
                        <input type="number" id="batch-max-interval" value="80" min="10" max="1440" placeholder="最大间隔">
                        <span class="help-text">两篇之间的最大时间间隔</span>
                    </div>

                    <div class="batch-publish-info">
                        <p class="info-text">
                            <strong>智能发布说明:</strong><br>
                            • 系统将在设定的时间间隔内随机安排发布时间<br>
                            • 自动跳过夜间时段 (22:00-08:00)，改为次日早上8点发布<br>
                            • 选中的 <span id="batch-selected-count-display">0</span> 篇草稿将被添加到定时发布队列
                        </p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="confirm-batch-publish-btn" class="btn-success">确认添加到定时发布</button>
                <button id="close-batch-publish-config-modal-footer" class="btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <!-- 草稿编辑弹窗 -->
    <div id="edit-draft-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>编辑草稿</h3>
                <button class="modal-close" id="close-edit-draft-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="edit-draft-section">
                    <div class="form-row">
                        <label>标题:</label>
                        <input type="text" id="edit-draft-title" placeholder="文章标题" class="grow">
                    </div>

                    <div class="form-row">
                        <label>内容:</label>
                        <textarea id="edit-draft-content" rows="12" placeholder="文章内容"></textarea>
                    </div>

                    <div class="form-row">
                        <label>话题:</label>
                        <select id="edit-draft-topic-group" class="small" style="width: 150px;">
                            <option value="">所有分组</option>
                        </select>
                        <select id="edit-draft-topic-select" class="grow">
                            <option value="">选择话题（可选）</option>
                        </select>
                    </div>

                    <div class="form-row">
                        <label>发布方式:</label>
                        <select id="edit-draft-publish-type" class="small" style="width: 120px;">
                            <option value="anonymous">匿名发布</option>
                            <option value="real_name">实名发布</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-draft-btn" class="btn-success">保存修改</button>
                <button id="close-edit-draft-modal-footer" class="btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <!-- 脉脉账号管理弹窗 -->
    <div id="maimai-accounts-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>脉脉账号管理</h3>
                <button class="modal-close" id="close-accounts-modal">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 账号统计信息 -->
                <div class="accounts-stats">
                    <p>账号总数: <span id="accounts-total-count">0</span> | 激活账号: <span id="accounts-active-count">0</span></p>
                </div>

                <!-- 新增账号区域 -->
                <div class="account-add-section">
                    <h4>添加新账号</h4>
                    <div class="account-form">
                        <div class="row">
                            <input type="text" id="new-account-name" placeholder="账号名称（用于识别）" class="grow">
                        </div>
                        <div class="row">
                            <input type="text" id="new-account-token" placeholder="Access Token" class="grow">
                        </div>
                        <div class="row">
                            <textarea id="new-account-description" rows="2" placeholder="账号描述（可选）"></textarea>
                        </div>
                        <div class="row">
                            <label class="checkbox-label">
                                <input type="checkbox" id="new-account-is-default">
                                <span>设为默认账号</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="new-account-is-active" checked>
                                <span>启用账号</span>
                            </label>
                        </div>
                        <div class="row">
                            <button id="add-account-btn" class="btn-success small">添加账号</button>
                            <button id="clear-account-form-btn" class="btn-secondary small">清空表单</button>
                        </div>
                    </div>
                </div>

                <!-- 账号列表区域 -->
                <div class="accounts-list-section">
                    <h4>现有账号</h4>
                    <div id="accounts-list-container" class="accounts-list-container">
                        <!-- 账号列表将在这里动态生成 -->
                        <p class="no-accounts-message">暂无账号</p>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="refresh-accounts" class="btn-primary">刷新列表</button>
                <button id="close-accounts-modal-footer" class="btn-secondary">关闭</button>
            </div>
        </div>
    </div>

    <script src="/static/js/main.js"></script>
</body>
</html>
